/**
 * 
 * @author filipbergstrom, filber-9
 *
 */

public class ArrivalEvent extends Event {
	private Supermarket s;
	private EventQueue eventQueue;
	private double arrivalTime;
	private Customer customer;
	private CustomerCreator c;
	
	public ArrivalEvent(Supermarket s, EventQueue eventQueue, Customer customer, double arrivalTime) {
		this.s = s;
		this.arrivalTime = arrivalTime;
	
		customer = c.createCustomer();								// H채r skapas en customer
	
		
	}
	
	void effekt() {
		s.updateTime(happeningTime);
		s.addTimeInQueue(s.getCurrentTime(), s.getPastEventTime());
		s.addKassaEmpty(s.getCurrentTime(), s.getPastEventTime());
		
		if (s.isOpen() == false) {									// Kollar om butiken 채r st채ngd
			
		}
		
		else {
			if (s.getCustomersInStore() < s.getMaxCapacity()) {			// Kollar om butiken 채r full
				s.addCustomersInStore();
				s.addTotalCustomers();
				
				
				eventQueue.addEvent(new ShoppingEvent(s, eventQueue, customer, s.getCurrentTime()));		//ska skapa event med customer 
			}
			
			else {
				s.addCustomersDenied();
			}
		}
	}


	public double getTime() {
		return arrivalTime;
	}
	
	public int getCustomer() {
		return customer.getCustomerNumber();
	}

}
